# ğŸ“ KIáº¾N TRÃšC Há»† THá»NG CTU-CONNECT

## MÃ´ táº£ tá»•ng quan

**CTU-Connect** lÃ  má»™t ná»n táº£ng máº¡ng xÃ£ há»™i há»c thuáº­t dÃ nh cho sinh viÃªn vÃ  giáº£ng viÃªn Äáº¡i há»c Cáº§n ThÆ¡ (CTU). Há»‡ thá»‘ng Ä‘Æ°á»£c xÃ¢y dá»±ng theo kiáº¿n trÃºc **Microservices** vá»›i cÃ¡c cÃ´ng nghá»‡ hiá»‡n Ä‘áº¡i, há»— trá»£:

- ğŸ” XÃ¡c thá»±c vÃ  phÃ¢n quyá»n ngÆ°á»i dÃ¹ng
- ğŸ‘¥ Quáº£n lÃ½ há»“ sÆ¡ vÃ  káº¿t báº¡n
- ğŸ“ ÄÄƒng bÃ i viáº¿t há»c thuáº­t
- ğŸ’¬ Chat real-time
- ğŸ¤– Gá»£i Ã½ bÃ i viáº¿t vÃ  báº¡n bÃ¨ báº±ng AI
- ğŸ“ Quáº£n lÃ½ media/file

---

## I. SÆ  Äá»’ KIáº¾N TRÃšC Tá»”NG QUAN

```
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚                         CLIENT LAYER                            â”‚
                                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                                    â”‚  â”‚  Client Frontend â”‚              â”‚    Admin Frontend       â”‚   â”‚
                                    â”‚  â”‚   (React/Vite)   â”‚              â”‚     (React/Vite)        â”‚   â”‚
                                    â”‚  â”‚    Port: 5173    â”‚              â”‚      Port: 5174         â”‚   â”‚
                                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚                                   â”‚
                                                â”‚ HTTP/WebSocket                    â”‚ HTTP
                                                â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         INFRASTRUCTURE LAYER                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                              EUREKA SERVER (Service Discovery)                                           â”‚ â”‚
â”‚   â”‚                                        Port: 8761                                                        â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â–²                                                          â”‚
â”‚                                                    â”‚ Service Registration                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                               API GATEWAY (Spring Cloud Gateway)                                         â”‚ â”‚
â”‚   â”‚                                        Port: 8090                                                        â”‚ â”‚
â”‚   â”‚  â€¢ JWT Validation â€¢ Rate Limiting â€¢ Load Balancing â€¢ Request Routing â€¢ CORS Handling                     â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚                             â”‚                             â”‚
                     â–¼                             â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                          MICROSERVICES LAYER                                                   â”‚
â”‚                                                                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   AUTH SERVICE   â”‚  â”‚   USER SERVICE   â”‚  â”‚   POST SERVICE   â”‚  â”‚   CHAT SERVICE   â”‚  â”‚  MEDIA SERVICE   â”‚ â”‚
â”‚  â”‚  (Spring Boot)   â”‚  â”‚  (Spring Boot)   â”‚  â”‚  (Spring Boot)   â”‚  â”‚  (Spring Boot)   â”‚  â”‚  (Spring Boot)   â”‚ â”‚
â”‚  â”‚   Port: 8091     â”‚  â”‚   Port: 8092     â”‚  â”‚   Port: 8093     â”‚  â”‚   Port: 8094     â”‚  â”‚   Port: 8096     â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚ â”‚
â”‚  â”‚ â€¢ Login/Register â”‚  â”‚ â€¢ Profile CRUD   â”‚  â”‚ â€¢ Post CRUD      â”‚  â”‚ â€¢ WebSocket      â”‚  â”‚ â€¢ File Upload    â”‚ â”‚
â”‚  â”‚ â€¢ JWT Token      â”‚  â”‚ â€¢ Friends        â”‚  â”‚ â€¢ Comments       â”‚  â”‚ â€¢ Real-time Chat â”‚  â”‚ â€¢ Image Process  â”‚ â”‚
â”‚  â”‚ â€¢ OAuth2         â”‚  â”‚ â€¢ Follow/Block   â”‚  â”‚ â€¢ Likes          â”‚  â”‚ â€¢ Conversations  â”‚  â”‚ â€¢ S3 Storage     â”‚ â”‚
â”‚  â”‚ â€¢ Refresh Token  â”‚  â”‚ â€¢ Search Users   â”‚  â”‚ â€¢ Tags           â”‚  â”‚ â€¢ Messages       â”‚  â”‚                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                     â”‚                     â”‚                     â”‚                     â”‚          â”‚
â”‚           â–¼                     â–¼                     â–¼                     â–¼                     â–¼          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   PostgreSQL     â”‚  â”‚     Neo4j        â”‚  â”‚    MongoDB       â”‚  â”‚    MongoDB       â”‚  â”‚   PostgreSQL     â”‚ â”‚
â”‚  â”‚   (auth_db)      â”‚  â”‚  (Graph DB)      â”‚  â”‚   (post_db)      â”‚  â”‚   (chat_db)      â”‚  â”‚   (media_db)     â”‚ â”‚
â”‚  â”‚   Port: 5433     â”‚  â”‚ Port: 7474/7687  â”‚  â”‚   Port: 27018    â”‚  â”‚   Port: 27019    â”‚  â”‚   Port: 5434     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                              RECOMMENDATION SERVICE (Hybrid: Java + Python)                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚  â”‚
â”‚  â”‚  â”‚     JAVA API (Spring Boot)       â”‚         â”‚     PYTHON MODEL (FastAPI)       â”‚                       â”‚  â”‚
â”‚  â”‚  â”‚          Port: 8095              â”‚  HTTP   â”‚          Port: 8000              â”‚                       â”‚  â”‚
â”‚  â”‚  â”‚                                  â”‚ â—„â”€â”€â”€â”€â”€â–º â”‚                                  â”‚                       â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ REST API for Frontend         â”‚         â”‚  â€¢ PhoBERT AI Model              â”‚                       â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Orchestrate Recommendation    â”‚         â”‚  â€¢ Text Embedding                â”‚                       â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Kafka Consumer                â”‚         â”‚  â€¢ Cosine Similarity             â”‚                       â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Redis Cache Management        â”‚         â”‚  â€¢ Batch Inference               â”‚                       â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Neo4j/PostgreSQL Access       â”‚         â”‚                                  â”‚                       â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚  â”‚
â”‚  â”‚                 â”‚                                            â”‚                                           â”‚  â”‚
â”‚  â”‚                 â–¼                                            â–¼                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚  â”‚
â”‚  â”‚  â”‚  PostgreSQL (recommend_db)       â”‚         â”‚     Redis (recommend-redis)      â”‚                       â”‚  â”‚
â”‚  â”‚  â”‚        Port: 5435                â”‚         â”‚        Port: 6380                â”‚                       â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                          SHARED INFRASTRUCTURE                                                 â”‚
â”‚                                                                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚  â”‚      KAFKA (Event Streaming)    â”‚    â”‚        REDIS (Global Cache)     â”‚                                   â”‚
â”‚  â”‚   Port: 9092 (External)         â”‚    â”‚        Port: 6379               â”‚                                   â”‚
â”‚  â”‚   Port: 29092 (Internal)        â”‚    â”‚                                 â”‚                                   â”‚
â”‚  â”‚                                 â”‚    â”‚  â€¢ Session Storage              â”‚                                   â”‚
â”‚  â”‚  â€¢ Post Events                  â”‚    â”‚  â€¢ Rate Limiting                â”‚                                   â”‚
â”‚  â”‚  â€¢ User Activity Events         â”‚    â”‚  â€¢ Cache Hot Data               â”‚                                   â”‚
â”‚  â”‚  â€¢ Recommendation Triggers      â”‚    â”‚                                 â”‚                                   â”‚
â”‚  â”‚  â€¢ Notification Events          â”‚    â”‚                                 â”‚                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## II. SÆ  Äá»’ LUá»’NG Dá»® LIá»†U (DATA FLOW)

```mermaid
flowchart TB
    subgraph Clients["ğŸ‘¤ CLIENT LAYER"]
        CF[Client Frontend<br/>React + Vite<br/>Port 5173]
        AF[Admin Frontend<br/>React + Vite<br/>Port 5174]
    end

    subgraph Gateway["ğŸšª API GATEWAY"]
        AG[API Gateway<br/>Spring Cloud<br/>Port 8090]
        EU[Eureka Server<br/>Service Discovery<br/>Port 8761]
    end

    subgraph Services["âš™ï¸ MICROSERVICES"]
        AUTH[Auth Service<br/>Port 8091]
        USER[User Service<br/>Port 8092]
        POST[Post Service<br/>Port 8093]
        CHAT[Chat Service<br/>Port 8094]
        MEDIA[Media Service<br/>Port 8096]
        
        subgraph Recommend["ğŸ¤– RECOMMENDATION"]
            REC_JAVA[Java API<br/>Port 8095]
            REC_PY[Python Model<br/>Port 8000]
        end
    end

    subgraph Databases["ğŸ’¾ DATABASES"]
        PG_AUTH[(PostgreSQL<br/>auth_db:5433)]
        NEO4J[(Neo4j<br/>Graph DB<br/>7474/7687)]
        MONGO_POST[(MongoDB<br/>post_db:27018)]
        MONGO_CHAT[(MongoDB<br/>chat_db:27019)]
        PG_MEDIA[(PostgreSQL<br/>media_db:5434)]
        PG_REC[(PostgreSQL<br/>recommend_db:5435)]
    end

    subgraph Infra["ğŸ”§ INFRASTRUCTURE"]
        KAFKA[Apache Kafka<br/>Event Bus<br/>9092]
        REDIS[Redis<br/>Cache<br/>6379]
        REDIS_REC[Redis<br/>Recommend Cache<br/>6380]
    end

    CF -->|HTTP/WS| AG
    AF -->|HTTP| AG
    
    AG --> EU
    AG --> AUTH
    AG --> USER
    AG --> POST
    AG --> CHAT
    AG --> MEDIA
    AG --> REC_JAVA

    AUTH --> PG_AUTH
    USER --> NEO4J
    POST --> MONGO_POST
    CHAT --> MONGO_CHAT
    CHAT -->|WebSocket| CF
    MEDIA --> PG_MEDIA
    
    REC_JAVA --> REC_PY
    REC_JAVA --> PG_REC
    REC_JAVA --> REDIS_REC
    REC_JAVA --> NEO4J
    REC_PY --> REDIS_REC
    
    POST --> KAFKA
    USER --> KAFKA
    KAFKA --> REC_JAVA
    
    AUTH --> REDIS
    CHAT --> REDIS
```

---

## III. MÃ” Táº¢ CHI TIáº¾T Tá»ªNG THÃ€NH PHáº¦N

### 1. ğŸ–¥ï¸ CLIENT LAYER

| Component | Technology | Port | Description |
|-----------|------------|------|-------------|
| **Client Frontend** | React + Vite | 5173 | Giao diá»‡n ngÆ°á»i dÃ¹ng chÃ­nh: Ä‘Äƒng nháº­p, xem bÃ i viáº¿t, chat, káº¿t báº¡n |
| **Admin Frontend** | React + Vite | 5174 | Giao diá»‡n quáº£n trá»‹: quáº£n lÃ½ user, bÃ i viáº¿t, thá»‘ng kÃª |

### 2. ğŸšª INFRASTRUCTURE LAYER

#### Eureka Server (Service Discovery)
- **Port:** 8761
- **Vai trÃ²:** ÄÄƒng kÃ½ vÃ  khÃ¡m phÃ¡ service
- **TÃ­nh nÄƒng:**
  - Tá»± Ä‘á»™ng Ä‘Äƒng kÃ½ microservices
  - Health check Ä‘á»‹nh ká»³
  - Load balancing thÃ´ng tin

#### API Gateway (Spring Cloud Gateway)
- **Port:** 8090
- **Vai trÃ²:** Entry point duy nháº¥t cho táº¥t cáº£ requests
- **TÃ­nh nÄƒng:**
  - JWT Authentication/Authorization
  - Request routing Ä‘áº¿n microservices
  - Rate limiting
  - CORS handling
  - Load balancing
  - Circuit breaker

### 3. âš™ï¸ MICROSERVICES LAYER

#### Auth Service
| Attribute | Value |
|-----------|-------|
| **Port** | 8091 |
| **Framework** | Spring Boot |
| **Database** | PostgreSQL (auth_db:5433) |
| **Chá»©c nÄƒng** | ÄÄƒng kÃ½, Ä‘Äƒng nháº­p, JWT token, OAuth2, Refresh token |

#### User Service
| Attribute | Value |
|-----------|-------|
| **Port** | 8092 |
| **Framework** | Spring Boot |
| **Database** | Neo4j (7474/7687) |
| **Chá»©c nÄƒng** | Quáº£n lÃ½ profile, káº¿t báº¡n, theo dÃµi, block, tÃ¬m kiáº¿m user |

> **LÃ½ do dÃ¹ng Neo4j:** Quan há»‡ báº¡n bÃ¨ lÃ  dáº¡ng Ä‘á»“ thá»‹ (graph), Neo4j tá»‘i Æ°u cho truy váº¥n quan há»‡ phá»©c táº¡p nhÆ° "báº¡n cá»§a báº¡n", "gá»£i Ã½ káº¿t báº¡n".

#### Post Service
| Attribute | Value |
|-----------|-------|
| **Port** | 8093 |
| **Framework** | Spring Boot |
| **Database** | MongoDB (post_db:27018) |
| **Chá»©c nÄƒng** | CRUD bÃ i viáº¿t, comments, likes, tags, tÃ¬m kiáº¿m |

> **LÃ½ do dÃ¹ng MongoDB:** BÃ i viáº¿t cÃ³ cáº¥u trÃºc linh hoáº¡t (text, hÃ¬nh áº£nh, file, tags), MongoDB phÃ¹ há»£p cho dá»¯ liá»‡u semi-structured.

#### Chat Service
| Attribute | Value |
|-----------|-------|
| **Port** | 8094 |
| **Framework** | Spring Boot + WebSocket |
| **Database** | MongoDB (chat_db:27019), Redis |
| **Chá»©c nÄƒng** | Real-time chat, conversations, messages history |

**Kiáº¿n trÃºc Chat:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      WebSocket      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ Chat Serviceâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                      â”‚                      â”‚
                    â–¼                      â–¼                      â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Redis     â”‚       â”‚  MongoDB    â”‚        â”‚    Kafka    â”‚
            â”‚ (Real-time) â”‚       â”‚  (History)  â”‚        â”‚  (Events)   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Media Service
| Attribute | Value |
|-----------|-------|
| **Port** | 8096 |
| **Framework** | Spring Boot |
| **Database** | PostgreSQL (media_db:5434) |
| **Chá»©c nÄƒng** | Upload file, xá»­ lÃ½ hÃ¬nh áº£nh, lÆ°u trá»¯ |

#### Recommendation Service (Hybrid Architecture)
| Component | Technology | Port | Vai trÃ² |
|-----------|------------|------|---------|
| **Java API** | Spring Boot | 8095 | REST API, orchestration, cache, Kafka consumer |
| **Python Model** | FastAPI + PhoBERT | 8000 | AI inference, embedding, similarity |

**Chi tiáº¿t kiáº¿n trÃºc Recommendation:**
```
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚         RECOMMENDATION SERVICE          â”‚
                          â”‚                                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   Frontend  â”‚ â”€â”€â”€â”€â”€â”€â”€â–º â”‚  â”‚       JAVA API (Port 8095)      â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  REST    â”‚  â”‚                                 â”‚   â”‚
                          â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
                          â”‚  â”‚  â”‚ RecommendationController  â”‚ â”‚   â”‚
                          â”‚  â”‚  â”‚ â€¢ GET /feed               â”‚ â”‚   â”‚
                          â”‚  â”‚  â”‚ â€¢ GET /academic           â”‚ â”‚   â”‚
                          â”‚  â”‚  â”‚ â€¢ GET /users              â”‚ â”‚   â”‚
                          â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
                          â”‚  â”‚              â”‚                 â”‚   â”‚
                          â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
                          â”‚  â”‚  â”‚  RecommendationService    â”‚ â”‚   â”‚
                          â”‚  â”‚  â”‚  â€¢ Candidate Selection    â”‚ â”‚   â”‚
                          â”‚  â”‚  â”‚  â€¢ Ranking Pipeline       â”‚ â”‚   â”‚
                          â”‚  â”‚  â”‚  â€¢ Cache Management       â”‚ â”‚   â”‚
                          â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
                          â”‚  â”‚              â”‚                 â”‚   â”‚
                          â”‚  â”‚              â–¼ HTTP            â”‚   â”‚
                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                          â”‚                â”‚                       â”‚
                          â”‚                â–¼                       â”‚
                          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                          â”‚  â”‚    PYTHON MODEL (Port 8000)     â”‚   â”‚
                          â”‚  â”‚                                 â”‚   â”‚
                          â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
                          â”‚  â”‚  â”‚      PhoBERT Model        â”‚ â”‚   â”‚
                          â”‚  â”‚  â”‚  (Vietnamese NLP)         â”‚ â”‚   â”‚
                          â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
                          â”‚  â”‚              â”‚                 â”‚   â”‚
                          â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
                          â”‚  â”‚  â”‚    Inference Engine       â”‚ â”‚   â”‚
                          â”‚  â”‚  â”‚  â€¢ Text Embedding         â”‚ â”‚   â”‚
                          â”‚  â”‚  â”‚  â€¢ Cosine Similarity      â”‚ â”‚   â”‚
                          â”‚  â”‚  â”‚  â€¢ Batch Processing       â”‚ â”‚   â”‚
                          â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. ğŸ’¾ DATABASE LAYER

| Database | Type | Port | Service | MÃ´ táº£ |
|----------|------|------|---------|-------|
| **PostgreSQL** | Relational | 5433 | Auth | LÆ°u thÃ´ng tin Ä‘Äƒng nháº­p, token |
| **PostgreSQL** | Relational | 5434 | Media | Metadata file, images |
| **PostgreSQL** | Relational | 5435 | Recommend | Embeddings, user preferences |
| **Neo4j** | Graph | 7474/7687 | User | Quan há»‡ báº¡n bÃ¨, follow |
| **MongoDB** | Document | 27018 | Post | BÃ i viáº¿t, comments |
| **MongoDB** | Document | 27019 | Chat | Messages, conversations |

### 5. ğŸ”§ SHARED INFRASTRUCTURE

#### Apache Kafka (Event Streaming)
- **Ports:** 9092 (external), 29092 (internal)
- **Vai trÃ²:** Message broker cho event-driven architecture
- **Topics:**
  - `post-events` - Sá»± kiá»‡n táº¡o/sá»­a/xÃ³a bÃ i viáº¿t
  - `user-events` - Sá»± kiá»‡n user activity
  - `recommendation-triggers` - Trigger cáº­p nháº­t gá»£i Ã½

#### Redis (Global Cache)
- **Port:** 6379
- **Vai trÃ²:** Cache, session store
- **Use cases:**
  - JWT session storage
  - Rate limiting counters
  - Hot data caching

#### Redis Recommend (Dedicated)
- **Port:** 6380
- **Vai trÃ²:** Cache riÃªng cho Recommendation Service
- **Use cases:**
  - Embedding vectors cache
  - Recommendation results cache

---

## IV. LUá»’NG Xá»¬ LÃ CHÃNH (MAIN FLOWS)

### 1. ğŸ” Luá»“ng ÄÄƒng nháº­p (Authentication Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚â”€â”€â”€â–ºâ”‚ API Gateway â”‚â”€â”€â”€â–ºâ”‚Auth Service â”‚â”€â”€â”€â–ºâ”‚ PostgreSQL  â”‚    â”‚   Redis     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                â”‚                   â”‚                  â”‚                  â”‚
     â”‚ 1. Login       â”‚                   â”‚                  â”‚                  â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ 2. Route          â”‚                  â”‚                  â”‚
     â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ 3. Validate      â”‚                  â”‚
     â”‚                â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
     â”‚                â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
     â”‚                â”‚                   â”‚ 4. Generate JWT  â”‚                  â”‚
     â”‚                â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚                â”‚                   â”‚                  â”‚  5. Store Sessionâ”‚
     â”‚                â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                  â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ 6. Return Token   â”‚                  â”‚                  â”‚
```

### 2. ğŸ“ Luá»“ng ÄÄƒng bÃ i viáº¿t (Create Post Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚â”€â”€â”€â–ºâ”‚ API Gateway â”‚â”€â”€â”€â–ºâ”‚Post Service â”‚â”€â”€â”€â–ºâ”‚  MongoDB    â”‚    â”‚   Kafka     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                â”‚                   â”‚                  â”‚                  â”‚
     â”‚ 1. Create Post â”‚                   â”‚                  â”‚                  â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ 2. Validate JWT   â”‚                  â”‚                  â”‚
     â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ 3. Save Post     â”‚                  â”‚
     â”‚                â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
     â”‚                â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
     â”‚                â”‚                   â”‚ 4. Publish Event â”‚                  â”‚
     â”‚                â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚                â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                  â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ 5. Response       â”‚                  â”‚                  â”‚
     â”‚                â”‚                   â”‚                  â”‚                  â”‚
     â”‚                â”‚                   â”‚                  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                â”‚                   â”‚                  â”‚    â”‚ Recommend   â”‚
     â”‚                â”‚                   â”‚                  â”‚    â”‚  Service    â”‚
     â”‚                â”‚                   â”‚                  â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
     â”‚                â”‚                   â”‚                  â”‚           â”‚
     â”‚                â”‚                   â”‚                  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                â”‚                   â”‚                  â”‚ 6. Consumeâ”‚
     â”‚                â”‚                   â”‚                  â”‚   & Index â”‚
```

### 3. ğŸ¤– Luá»“ng Gá»£i Ã½ bÃ i viáº¿t (Recommendation Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚â”€â”€â”€â–ºâ”‚ API Gateway â”‚â”€â”€â”€â–ºâ”‚ Java API    â”‚â”€â”€â”€â–ºâ”‚Python Model â”‚    â”‚   Redis     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                â”‚                   â”‚                  â”‚                  â”‚
     â”‚ 1. Get Feed    â”‚                   â”‚                  â”‚                  â”‚
     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ 2. Route          â”‚                  â”‚                  â”‚
     â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ 3. Check Cache   â”‚                  â”‚
     â”‚                â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚                â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
     â”‚                â”‚                   â”‚ 4. Cache Miss?   â”‚                  â”‚
     â”‚                â”‚                   â”‚                  â”‚                  â”‚
     â”‚                â”‚                   â”‚ 5. Get User      â”‚                  â”‚
     â”‚                â”‚                   â”‚    Embedding     â”‚                  â”‚
     â”‚                â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
     â”‚                â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
     â”‚                â”‚                   â”‚ 6. Get Candidatesâ”‚                  â”‚
     â”‚                â”‚                   â”‚    from Neo4j    â”‚                  â”‚
     â”‚                â”‚                   â”‚                  â”‚                  â”‚
     â”‚                â”‚                   â”‚ 7. Batch Embed   â”‚                  â”‚
     â”‚                â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚
     â”‚                â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚
     â”‚                â”‚                   â”‚ 8. Rank by Score â”‚                  â”‚
     â”‚                â”‚                   â”‚                  â”‚                  â”‚
     â”‚                â”‚                   â”‚ 9. Cache Result  â”‚                  â”‚
     â”‚                â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
     â”‚                â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                  â”‚                  â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ 10. Return Feed   â”‚                  â”‚                  â”‚
```

### 4. ğŸ’¬ Luá»“ng Chat Real-time

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client A â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚Chat Service â”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Client B    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜WebSocketâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜WebSocketâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚             â”‚             â”‚
              â–¼             â–¼             â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚   Redis     â”‚ â”‚ MongoDB â”‚ â”‚   Kafka     â”‚
       â”‚(Real-time)  â”‚ â”‚(History)â”‚ â”‚ (Events)    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Luá»“ng gá»­i tin nháº¯n:
1. Client A gá»­i message qua WebSocket
2. Chat Service nháº­n vÃ  xá»­ lÃ½
3. LÆ°u vÃ o Redis (cho real-time lookup)
4. Persist vÃ o MongoDB (cho history)
5. Publish event lÃªn Kafka
6. Push message Ä‘áº¿n Client B qua WebSocket
```

---

## V. CÃ”NG NGHá»† Sá»¬ Dá»¤NG

### Backend
| Technology | Version | Má»¥c Ä‘Ã­ch |
|------------|---------|----------|
| Java | 17+ | NgÃ´n ngá»¯ chÃ­nh |
| Spring Boot | 3.x | Framework backend |
| Spring Cloud | 2023.x | Microservices tools |
| Python | 3.10 | AI/ML service |
| FastAPI | Latest | Python REST framework |

### Frontend
| Technology | Version | Má»¥c Ä‘Ã­ch |
|------------|---------|----------|
| React | 18.x | UI library |
| Vite | 5.x | Build tool |
| TypeScript | 5.x | Type-safe JavaScript |
| TailwindCSS | 3.x | Styling |

### Database
| Technology | Version | Má»¥c Ä‘Ã­ch |
|------------|---------|----------|
| PostgreSQL | 15 | Relational data |
| MongoDB | 7.0 | Document data |
| Neo4j | 5.13 | Graph data |
| Redis | 7 | Cache & session |

### Infrastructure
| Technology | Version | Má»¥c Ä‘Ã­ch |
|------------|---------|----------|
| Docker | Latest | Containerization |
| Docker Compose | Latest | Local orchestration |
| Apache Kafka | 3.7 | Event streaming |
| Eureka | Latest | Service discovery |

### AI/ML
| Technology | Version | Má»¥c Ä‘Ã­ch |
|------------|---------|----------|
| PhoBERT | Latest | Vietnamese NLP |
| PyTorch | 2.x | Deep learning |
| Transformers | 4.x | Model loading |

---

## VI. DEPLOYMENT

### Development Environment
```bash
# Start all services
docker-compose up -d

# Check service status
docker-compose ps

# View logs
docker-compose logs -f <service-name>
```

### Service URLs (Development)
| Service | URL |
|---------|-----|
| Eureka Dashboard | http://localhost:8761 |
| API Gateway | http://localhost:8090 |
| Client Frontend | http://localhost:5173 |
| Admin Frontend | http://localhost:5174 |
| Neo4j Browser | http://localhost:7474 |
| Python Model Health | http://localhost:8000/health |

---

## VII. Báº¢O Máº¬T

### Authentication
- **JWT** vá»›i RS256 algorithm
- Access token: 15 phÃºt
- Refresh token: 7 ngÃ y
- Token blacklist trong Redis

### Authorization
- Role-based: ADMIN, USER, MODERATOR
- Resource-based cho posts/comments

### Network Security
- HTTPS everywhere (production)
- CORS configuration
- Rate limiting
- Input validation

---

## VIII. MONITORING & LOGGING

### Recommended Stack
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OBSERVABILITY STACK                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Prometheus  â”‚â”€â”€â”€â–ºâ”‚  Grafana    â”‚    â”‚   Jaeger    â”‚         â”‚
â”‚  â”‚  (Metrics)  â”‚    â”‚(Dashboards) â”‚    â”‚  (Tracing)  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â–²                                      â–²                â”‚
â”‚         â”‚                                      â”‚                â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                        â”‚                                        â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚              â”‚   Microservices   â”‚                             â”‚
â”‚              â”‚ (Spring Actuator) â”‚                             â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚    ELK      â”‚â—„â”€â”€â”€â”‚   Filebeat  â”‚                            â”‚
â”‚  â”‚   Stack     â”‚    â”‚  (Shipper)  â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## IX. Gá»¢I Ã Cáº¢I TIáº¾N

1. **Scalability:**
   - Kubernetes deployment cho production
   - Horizontal pod autoscaling cho Chat & Recommend services
   - Database replication

2. **Performance:**
   - CQRS pattern cho Post service
   - Read replicas cho Neo4j
   - CDN cho static assets

3. **Reliability:**
   - Circuit breaker patterns
   - Retry mechanisms
   - Dead letter queues cho Kafka

4. **AI Enhancements:**
   - A/B testing cho recommendation algorithms
   - Online learning pipeline
   - Feature store cho ML features

---

*Document updated: December 12, 2025*
